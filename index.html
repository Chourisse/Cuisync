<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="description" content="Cuisync: application de gestion de commandes pour restaurants (serveur, cuisine, h√¥te). Local-first, rapide et simple.">
    <meta name="theme-color" content="#0F172A">
    <meta property="og:title" content="Cuisync - Gestion de commandes">
    <meta property="og:description" content="Vue serveur, cuisine et h√¥te. Enregistrement local, export CSV, tickets d'impression.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://i.ibb.co/tpVctCfJ/cuisync.jpg">
    <link rel="apple-touch-icon" href="https://i.ibb.co/tpVctCfJ/cuisync.jpg">
    <link rel="manifest" href="manifest.webmanifest">
    <title>Cuisync - Gestion de commandes</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="https://i.ibb.co/tpVctCfJ/cuisync.jpg">
</head>
<body>
    <!-- Toast notifications -->
    <div id="toast-container" aria-live="polite" aria-atomic="true"></div>

    <!-- Header with view toggle -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <img src="https://i.ibb.co/tpVctCfJ/cuisync.jpg" alt="Cuisync" width="32" height="32">
                <h1>Cuisync</h1>
            </div>
            <div class="view-toggle">
                <button id="server-view-btn" class="view-btn active" aria-pressed="true" title="Vue serveur - Prendre les commandes">
                    <span class="view-icon">üçΩÔ∏è</span>
                    <span class="view-label">Serveur</span>
                </button>
                <button id="kitchen-view-btn" class="view-btn" aria-pressed="false" title="Vue cuisine - Voir les commandes">
                    <span class="view-icon">üë®‚Äçüç≥</span>
                    <span class="view-label">Cuisine</span>
                </button>
                <button id="host-view-btn" class="view-btn" aria-pressed="false" title="Vue h√¥te - Gestion">
                    <span class="view-icon">üìã</span>
                    <span class="view-label">H√¥te</span>
                </button>
            </div>
        </div>
    </header>

    <main class="main">
        <!-- Server View -->
        <section id="server-view" class="view-section active">
            <div class="container">
                
                <div class="form-section">
                    <div class="section-header">
                        <h2>üìù Nouvelle commande</h2>
                        <p class="section-subtitle">Ajoutez des plats √† une table</p>
                    </div>
                    <form id="order-form" class="order-form">
                        <div class="form-group">
                            <label for="table-input">Table *</label>
                            <div class="form-row">
                                <input type="number" id="table-input" min="1" max="99" required aria-describedby="table-error">
                                <input type="number" id="covers-input" min="1" max="20" placeholder="Couverts" title="Nombre de couverts">
                            </div>
                            <div id="table-error" class="error-message" role="alert"></div>
                        </div>
                        <div class="form-group">
                            <label for="client-name-input">Client (optionnel)</label>
                            <input type="text" id="client-name-input" placeholder="Nom du client">
                        </div>
                        <div class="form-group">
                            <label for="table-notes-input">Notes table (optionnel)</label>
                            <textarea id="table-notes-input" rows="2" placeholder="Allergies, pr√©f√©rences, etc."></textarea>
                        </div>
                        <div class="form-group">
                            <label>Plat *</label>
                            <div class="form-row">
                                <select id="category-select">
                                    <option value="">Cat√©gorie‚Ä¶</option>
                                </select>
                                <select id="dish-select">
                                    <option value="">Plat‚Ä¶</option>
                                </select>
                            </div>
                            <div class="or-separator">ou</div>
                            <input type="text" id="dish-input" placeholder="Saisie libre du plat" aria-describedby="dish-error">
                            <div id="dish-error" class="error-message" role="alert"></div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="qty-input">Quantit√©</label>
                                <input type="number" id="qty-input" value="1" min="1" max="20">
                            </div>
                            <div class="form-group">
                                <label for="price-input">Prix (‚Ç¨)</label>
                                <input type="number" step="0.01" min="0" id="price-input" placeholder="0.00">
                            </div>
                            <div class="form-group">
                                <label for="total-input">Total (‚Ç¨)</label>
                                <input type="number" id="total-input" placeholder="0.00" readonly>
                            </div>
                            <div class="form-group">
                                <label for="course-input">Service</label>
                                <select id="course-input">
                                    <option value="">Entr√©e</option>
                                    <option value="plat" selected>Plat</option>
                                    <option value="dessert">Dessert</option>
                                    <option value="boisson">Boisson</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="note-input">Note plat (optionnelle)</label>
                            <textarea id="note-input" rows="2" placeholder="Instructions sp√©ciales pour ce plat..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>Modificateurs</label>
                            <div id="modifiers-container" class="modifiers-container">
                                <!-- Modifiers will be rendered here -->
                            </div>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="item-allergen-check"> Plat contient des allerg√®nes
                            </label>
                        </div>
                        <button type="submit" class="btn btn-primary">Ajouter √† la commande</button>
                    </form>
                </div>

                <div class="actions-section">
                    <div class="action-buttons">
                        <button id="send-all-btn" class="btn btn-secondary" disabled>
                            Envoyer les commandes ouvertes
                        </button>
                    </div>
                </div>

                <div class="pads-section">
                    <div class="pads-section-header">
                        <div>
                            <h2>üõí Commandes en cours</h2>
                            <p class="section-subtitle" id="pads-count">Aucune commande</p>
                        </div>
                        <div class="pads-filters">
                            <input type="text" id="server-search-input" placeholder="üîç Rechercher..." class="search-input">
                            <select id="server-status-filter" class="status-filter">
                                <option value="all">Toutes</option>
                                <option value="open">Ouvertes</option>
                                <option value="sent">Envoy√©es</option>
                                <option value="ready">Pr√™tes</option>
                            </select>
                        </div>
                    </div>
                    <div id="server-pads-container" class="pads-container">
                        <div class="empty-state">
                            <p>Aucune commande en cours</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Kitchen View -->
        <section id="kitchen-view" class="view-section">
            <div class="container">
                <div class="kitchen-header">
                    <div>
                        <h2>üë®‚Äçüç≥ Vue cuisine</h2>
                        <p class="section-subtitle">Commandes √† pr√©parer</p>
                    </div>
                    <div class="kitchen-controls">
                        <button id="sound-toggle-btn" class="btn btn-outline" aria-pressed="true">
                            üîä Son activ√©
                        </button>
                        <button id="fullscreen-btn" class="btn btn-outline" title="Mode plein √©cran (F11)">
                            ‚õ∂ Plein √©cran
                        </button>
                        <button id="print-all-kitchen-btn" class="btn btn-secondary" title="Imprimer tous les tickets">
                            üñ®Ô∏è Imprimer
                        </button>
                        <select id="kitchen-filter-select" class="kitchen-filter">
                            <option value="all">Toutes les commandes</option>
                            <option value="sent">En attente</option>
                            <option value="ready">Pr√™tes</option>
                        </select>
                    </div>
                </div>
                <div id="kitchen-stats" class="kitchen-stats">
                    <div class="kitchen-stat-item">
                        <span class="stat-label">En attente:</span>
                        <span class="stat-value" id="kitchen-pending-count">0</span>
                    </div>
                    <div class="kitchen-stat-item">
                        <span class="stat-label">Pr√™tes:</span>
                        <span class="stat-value" id="kitchen-ready-count">0</span>
                    </div>
                    <div class="kitchen-stat-item">
                        <span class="stat-label">Temps moyen:</span>
                        <span class="stat-value" id="kitchen-avg-time">‚Äî</span>
                    </div>
                </div>
                <div id="kitchen-pads-container" class="pads-container kitchen-pads">
                    <div class="empty-state">
                    <p>Aucune commande envoy√©e</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Host View - Completely Reorganized -->
        <section id="host-view" class="view-section">
            <div class="host-container">
                <!-- Host Header -->
                <div class="host-header">
                    <div>
                        <h2>üìã Vue h√¥te</h2>
                        <p class="section-subtitle">Gestion compl√®te du restaurant</p>
                    </div>
                    <div class="host-header-actions">
                        <button id="export-csv-btn" class="btn btn-outline" title="Exporter les commandes">
                            <span>üì•</span> <span class="btn-label">CSV</span>
                        </button>
                        <button id="export-sales-btn" class="btn btn-outline" title="Exporter les ventes">
                            <span>üí∞</span> <span class="btn-label">Ventes</span>
                        </button>
                    </div>
                </div>
                
                <!-- Notifications (Always visible) -->
                <div id="notifications-panel" class="host-notifications">
                    <div class="notifications-header">
                        <h3>üîî Notifications</h3>
                    </div>
                    <div id="notifications-list" class="notifications-list">
                        <!-- Notifications will be rendered here -->
                    </div>
                </div>
                
                <!-- Main Navigation Tabs -->
                <div class="host-main-nav">
                    <button id="tables-view-btn" class="host-main-tab active" data-view="tables">
                        <span class="tab-icon">ü™ë</span>
                        <span class="tab-label">Tables</span>
                    </button>
                    <button id="reservations-view-btn" class="host-main-tab" data-view="reservations">
                        <span class="tab-icon">üìÖ</span>
                        <span class="tab-label">R√©servations</span>
                    </button>
                    <button id="stats-view-btn" class="host-main-tab" data-view="stats">
                        <span class="tab-icon">üìä</span>
                        <span class="tab-label">Statistiques</span>
                    </button>
                    <button id="menu-view-btn" class="host-main-tab" data-view="menu">
                        <span class="tab-icon">üçΩÔ∏è</span>
                        <span class="tab-label">Menu</span>
                    </button>
                    <button id="clients-view-btn" class="host-main-tab" data-view="clients">
                        <span class="tab-icon">üë§</span>
                        <span class="tab-label">Clients</span>
                    </button>
                    <button id="history-view-btn" class="host-main-tab" data-view="history">
                        <span class="tab-icon">üìú</span>
                        <span class="tab-label">Historique</span>
                    </button>
                    <button id="settings-view-btn" class="host-main-tab" data-view="settings">
                        <span class="tab-icon">‚öôÔ∏è</span>
                        <span class="tab-label">Param√®tres</span>
                    </button>
                    <button id="map-view-btn" class="host-main-tab" data-view="map">
                        <span class="tab-icon">üó∫Ô∏è</span>
                        <span class="tab-label">Carte</span>
                    </button>
                    <button id="inventory-view-btn" class="host-main-tab" data-view="inventory">
                        <span class="tab-icon">üì¶</span>
                        <span class="tab-label">Stocks</span>
                    </button>
                    <button id="shifts-view-btn" class="host-main-tab" data-view="shifts">
                        <span class="tab-icon">üë•</span>
                        <span class="tab-label">√âquipes</span>
                    </button>
                    <button id="discounts-view-btn" class="host-main-tab" data-view="discounts">
                        <span class="tab-icon">üé´</span>
                        <span class="tab-label">Remises</span>
                    </button>
                    <button id="reports-view-btn" class="host-main-tab" data-view="reports">
                        <span class="tab-icon">üìä</span>
                        <span class="tab-label">Rapports</span>
                    </button>
                </div>
                
                <!-- Tables Management -->
                <div id="tables-management" class="host-content-section">
                    <div class="host-section-header">
                        <div>
                            <h2>ü™ë Gestion des tables</h2>
                            <p class="section-subtitle">G√©rer l'√©tat et la configuration des tables</p>
                        </div>
                        <div class="view-mode-toggle">
                            <button id="grid-view-btn" class="btn btn-outline active">Vue grille</button>
                            <button id="floor-plan-view-btn" class="btn btn-outline">Plan de salle</button>
                        </div>
                    </div>
                    
                    <div id="tables-grid-view" class="tables-grid-view">
                        <div class="tables-grid" id="tables-grid">
                            <!-- Tables will be rendered here -->
                        </div>
                    </div>
                    
                    <div id="tables-floor-plan-view" class="tables-floor-plan-view hidden">
                        <div class="floor-plan-container">
                            <div id="floor-plan" class="floor-plan">
                                <!-- Floor plan will be rendered here -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="tables-actions">
                        <button id="add-table-btn" class="btn btn-secondary">‚ûï Ajouter une table</button>
                        <input type="number" id="max-tables-input" placeholder="Nombre max de tables" min="1" max="200" class="max-tables-input">
                        <button id="save-tables-config-btn" class="btn btn-primary">üíæ Enregistrer configuration</button>
                    </div>
                </div>
                
                <!-- Reservations Management -->
                <div id="reservations-management" class="host-content-section hidden">
                    <div class="host-section-header">
                        <div>
                            <h2>üìÖ Gestion des r√©servations</h2>
                            <p class="section-subtitle">Cr√©er et g√©rer les r√©servations</p>
                        </div>
                    </div>
                    
                    <div class="reservations-content">
                        <div class="reservation-calendar-section">
                            <div class="reservation-calendar-header">
                                <button id="prev-day-btn" class="btn btn-outline">‚Üê</button>
                                <div id="current-date-display" class="current-date-display"></div>
                                <button id="next-day-btn" class="btn btn-outline">‚Üí</button>
                                <button id="today-btn" class="btn btn-secondary">Aujourd'hui</button>
                            </div>
                            <div id="reservation-calendar" class="reservation-calendar">
                                <!-- Calendar will be rendered here -->
                            </div>
                        </div>
                        
                        <div class="reservation-form-section">
                            <h3>‚ûï Nouvelle r√©servation</h3>
                            <form id="reservation-form" class="reservation-form" autocomplete="off">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="reservation-name-input">Nom du client *</label>
                                        <input type="text" id="reservation-name-input" placeholder="Nom du client" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="reservation-covers-input">Nombre de couverts *</label>
                                        <input type="number" id="reservation-covers-input" placeholder="Couverts" min="1" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="reservation-date-input">Date *</label>
                                        <input type="date" id="reservation-date-input" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="reservation-time-input">Heure *</label>
                                        <input type="time" id="reservation-time-input" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="reservation-table-select">Table</label>
                                        <select id="reservation-table-select">
                                            <option value="">Aucune (optionnel)</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="reservation-phone-input">T√©l√©phone</label>
                                        <input type="tel" id="reservation-phone-input" placeholder="T√©l√©phone">
                                    </div>
                                    <div class="form-group">
                                        <label for="reservation-email-input">Email</label>
                                        <input type="email" id="reservation-email-input" placeholder="Email (optionnel)">
                                    </div>
                                    <div class="form-group">
                                        <label for="reservation-occasion-select">Occasion</label>
                                        <select id="reservation-occasion-select">
                                            <option value="">Aucune</option>
                                            <option value="anniversary">Anniversaire</option>
                                            <option value="birthday">F√™te d'anniversaire</option>
                                            <option value="business">D√Æner d'affaires</option>
                                            <option value="romantic">Romantique</option>
                                            <option value="other">Autre</option>
                                        </select>
                                    </div>
                                    <div class="form-group form-group-full">
                                        <label for="reservation-notes-input">Notes</label>
                                        <textarea id="reservation-notes-input" placeholder="Allergies, pr√©f√©rences..." rows="3"></textarea>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">‚úÖ Ajouter r√©servation</button>
                            </form>
                        </div>
                    </div>
                    
                    <div id="reservations-list" class="reservations-list">
                        <!-- Reservations will be rendered here -->
                    </div>
                </div>
                
                <!-- Statistics View -->
                <div id="statistics-view" class="host-content-section hidden">
                    <div class="host-section-header">
                        <div>
                            <h2>üìä Statistiques</h2>
                            <p class="section-subtitle">Analyser les performances du restaurant</p>
                        </div>
                        <div class="stats-filters">
                            <select id="stats-period-select" class="stats-period-select">
                                <option value="today">Aujourd'hui</option>
                                <option value="week">Cette semaine</option>
                                <option value="month">Ce mois</option>
                                <option value="all">Tout</option>
                            </select>
                            <button id="export-report-btn" class="btn btn-secondary">üìÑ Exporter rapport</button>
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Chiffre d'affaires</h3>
                            <div class="stat-value" id="stat-revenue">0,00 ‚Ç¨</div>
                            <div class="stat-change" id="stat-revenue-change">‚Äî</div>
                        </div>
                        <div class="stat-card">
                            <h3>Nombre de commandes</h3>
                            <div class="stat-value" id="stat-orders">0</div>
                            <div class="stat-change" id="stat-orders-change">‚Äî</div>
                        </div>
                        <div class="stat-card">
                            <h3>Tables servies</h3>
                            <div class="stat-value" id="stat-tables">0</div>
                            <div class="stat-change" id="stat-tables-change">‚Äî</div>
                        </div>
                        <div class="stat-card">
                            <h3>Panier moyen</h3>
                            <div class="stat-value" id="stat-average">0,00 ‚Ç¨</div>
                            <div class="stat-change" id="stat-average-change">‚Äî</div>
                        </div>
                        <div class="stat-card">
                            <h3>Heure de pointe</h3>
                            <div class="stat-value" id="stat-peak-hour">‚Äî</div>
                        </div>
                        <div class="stat-card">
                            <h3>M√©thode de paiement</h3>
                            <div id="stat-payment-methods" class="stat-payment-methods">
                                <!-- Payment methods will be rendered here -->
                            </div>
                        </div>
                    </div>
                    <div class="stats-details">
                        <div class="stats-detail-section">
                            <h3>üçΩÔ∏è Plats les plus vendus</h3>
                            <div id="top-dishes-list" class="top-dishes-list">
                                <!-- Top dishes will be rendered here -->
                            </div>
                        </div>
                        <div class="stats-detail-section">
                            <h3>üìà Revenus par jour</h3>
                            <div id="revenue-chart" class="revenue-chart">
                                <!-- Chart will be rendered here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Menu Management -->
                <div id="menu-management" class="host-content-section hidden">
                    <div class="host-section-header">
                        <div>
                            <h2>üçΩÔ∏è Gestion du menu</h2>
                            <p class="section-subtitle">G√©rer les cat√©gories et les plats</p>
                        </div>
                        <div class="menu-actions">
                            <input type="text" id="menu-search-input" placeholder="üîç Rechercher un plat..." class="search-input">
                            <button id="import-menu-btn" class="btn btn-outline">üì• Importer</button>
                            <button id="export-menu-btn" class="btn btn-outline">üì§ Exporter</button>
                        </div>
                    </div>
                    <div class="menu-forms">
                        <form id="category-form" class="menu-form-card">
                            <h3>‚ûï Nouvelle cat√©gorie</h3>
                            <div class="inline-row">
                                <input type="text" id="category-name-input" placeholder="Ex: Entr√©es" required>
                                <button type="submit" class="btn btn-secondary">Ajouter</button>
                            </div>
                        </form>

                        <form id="dish-form" class="menu-form-card">
                            <h3>‚ûï Nouveau plat</h3>
                            <div class="dish-form-grid">
                                <select id="dish-category-select" required>
                                    <option value="" selected>Choisir cat√©gorie‚Ä¶</option>
                                </select>
                                <input type="text" id="dish-name-input" placeholder="Nom du plat" required>
                                <input type="number" step="0.01" min="0" id="dish-price-input" placeholder="Prix (‚Ç¨)" required>
                                <select id="dish-availability-select">
                                    <option value="available" selected>Disponible</option>
                                    <option value="unavailable">Indisponible</option>
                                </select>
                                <input type="text" id="dish-allergens-input" placeholder="Allerg√®nes (ex: gluten, lactose)">
                                <textarea id="dish-description-input" placeholder="Description (optionnel)" rows="2"></textarea>
                                <button type="submit" class="btn btn-primary">Ajouter plat</button>
                            </div>
                        </form>
                    </div>

                    <div class="menu-list" id="menu-list">
                        <div class="empty-state"><p>Aucune cat√©gorie/plat enregistr√©s</p></div>
                    </div>
                </div>
                
                <!-- Clients Management -->
                <div id="clients-management" class="host-content-section hidden">
                    <div class="host-section-header">
                        <div>
                            <h2>üë§ Clients r√©currents</h2>
                            <p class="section-subtitle">G√©rer les pr√©f√©rences des clients</p>
                        </div>
                    </div>
                    <div class="client-search">
                        <input type="text" id="client-search-input" placeholder="üîç Rechercher un client par nom ou t√©l√©phone...">
                    </div>
                    <div id="client-preferences-list" class="client-preferences-list">
                        <!-- Client preferences will be rendered here -->
                    </div>
                </div>
                
                <!-- History View -->
                <div id="history-section" class="host-content-section hidden">
                    <div class="host-section-header">
                        <div>
                            <h2>üìú Historique des commandes</h2>
                            <p class="section-subtitle">Consulter l'historique des commandes pass√©es</p>
                        </div>
                    </div>
                    <div class="history-filters">
                        <select id="history-filter-select">
                            <option value="all">Toutes les commandes</option>
                            <option value="today">Aujourd'hui</option>
                            <option value="week">Cette semaine</option>
                            <option value="month">Ce mois</option>
                        </select>
                        <input type="text" id="history-search-input" placeholder="üîç Rechercher par table, client...">
                        <button id="clear-history-btn" class="btn btn-danger btn-sm">üóëÔ∏è Effacer l'historique</button>
                    </div>
                    <div id="history-list" class="history-list">
                        <!-- History will be rendered here -->
                    </div>
                </div>
                
                <!-- Settings View -->
                <div id="settings-management" class="host-content-section hidden">
                    <div class="host-section-header">
                        <div>
                            <h2>‚öôÔ∏è Param√®tres</h2>
                            <p class="section-subtitle">Configuration du restaurant et donn√©es</p>
                        </div>
                    </div>
                    
                    <!-- Restaurant Settings -->
                    <div class="settings-section">
                        <h3>üè¢ Param√®tres du restaurant</h3>
                        <form id="restaurant-settings-form" class="settings-form" autocomplete="off">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="restaurant-name-input">Nom du restaurant</label>
                                    <input type="text" id="restaurant-name-input" placeholder="Nom du restaurant">
                                </div>
                                <div class="form-group">
                                    <label for="restaurant-phone-input">T√©l√©phone</label>
                                    <input type="tel" id="restaurant-phone-input" placeholder="T√©l√©phone">
                                </div>
                                <div class="form-group">
                                    <label for="restaurant-email-input">Email</label>
                                    <input type="email" id="restaurant-email-input" placeholder="Email">
                                </div>
                                <div class="form-group form-group-full">
                                    <label for="restaurant-address-input">Adresse</label>
                                    <textarea id="restaurant-address-input" rows="2" placeholder="Adresse compl√®te"></textarea>
                                </div>
                            </div>
                            <h4 style="margin-top: 2rem; margin-bottom: 1rem;">Horaires d'ouverture</h4>
                            <div id="opening-hours-container" class="opening-hours-container">
                                <!-- Opening hours will be rendered here -->
                            </div>
                            <button type="submit" class="btn btn-primary" style="margin-top: 1rem;">üíæ Enregistrer</button>
                        </form>
                    </div>
                    
                    <!-- POS Settings -->
                    <div class="settings-section">
                        <h3>üí≥ Param√®tres d'encaissement</h3>
                        <form id="pos-settings-form" class="settings-form" autocomplete="off">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="pos-tva">TVA (%)</label>
                                    <input type="number" id="pos-tva" step="0.1" min="0" value="10">
                                </div>
                                <div class="form-group">
                                    <label for="pos-currency">Devise</label>
                                    <input type="text" id="pos-currency" value="‚Ç¨">
                                </div>
                                <div class="form-group">
                                    <label for="pos-default-tip">Pourboire par d√©faut (%)</label>
                                    <input type="number" id="pos-default-tip" step="1" min="0" value="0">
                                </div>
                                <div class="form-group form-group-full">
                                    <label style="display:flex; align-items:center; gap:8px;">
                                        <input type="checkbox" id="pos-print-after-pay"> Imprimer le ticket apr√®s paiement
                                    </label>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-secondary">üíæ Enregistrer</button>
                        </form>
                    </div>
                    
                    <!-- Servers Management -->
                    <div class="settings-section">
                        <h3>üë• Gestion des serveurs</h3>
                        <form id="server-form" class="inline-form" autocomplete="off">
                            <div class="inline-row">
                                <input type="text" id="server-name-input" placeholder="Nom du serveur" required>
                                <button type="submit" class="btn btn-primary">‚ûï Ajouter serveur</button>
                            </div>
                        </form>
                        <div id="servers-list" class="servers-list">
                            <!-- Servers will be rendered here -->
                        </div>
                    </div>
                    
                    <!-- Events Management -->
                    <div class="settings-section">
                        <h3>üéâ Gestion des √©v√©nements</h3>
                        <form id="event-form" class="settings-form" autocomplete="off">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="event-name-input">Nom de l'√©v√©nement *</label>
                                    <input type="text" id="event-name-input" placeholder="Nom de l'√©v√©nement" required>
                                </div>
                                <div class="form-group">
                                    <label for="event-date-input">Date *</label>
                                    <input type="date" id="event-date-input" required>
                                </div>
                                <div class="form-group">
                                    <label for="event-time-input">Heure</label>
                                    <input type="time" id="event-time-input">
                                </div>
                                <div class="form-group">
                                    <label for="event-capacity-input">Capacit√© max</label>
                                    <input type="number" id="event-capacity-input" placeholder="Capacit√©" min="1">
                                </div>
                                <div class="form-group form-group-full">
                                    <label for="event-description-input">Description</label>
                                    <textarea id="event-description-input" placeholder="Description" rows="2"></textarea>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">‚úÖ Ajouter √©v√©nement</button>
                        </form>
                        <div id="events-list" class="events-list">
                            <!-- Events will be rendered here -->
                        </div>
                    </div>
                    
                    <!-- Backup & Restore -->
                    <div class="settings-section">
                        <h3>üíæ Sauvegarde et restauration</h3>
                        <div class="backup-actions">
                            <button id="backup-all-btn" class="btn btn-primary">üíæ Sauvegarder toutes les donn√©es</button>
                            <button id="restore-btn" class="btn btn-secondary">üì• Restaurer depuis un fichier</button>
                            <input type="file" id="restore-file-input" accept=".json" style="display: none;">
                        </div>
                        <div class="backup-info">
                            <p class="backup-note">üí° Sauvegardez r√©guli√®rement vos donn√©es pour √©viter toute perte. La restauration remplacera toutes les donn√©es actuelles.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Map View -->
                <div id="map-management" class="host-content-section hidden">
                    <div class="host-section-header">
                        <div>
                            <h2>üó∫Ô∏è Carte des tables</h2>
                            <p class="section-subtitle">Visualisez la position de chaque table et les locaux</p>
                        </div>
                    </div>
                    
                    <div class="map-container">
                        <div id="restaurant-map" class="restaurant-map">
                            <!-- Map will be rendered here -->
                        </div>
                        <div class="map-legend">
                            <h3>L√©gende</h3>
                            <div class="legend-items">
                                <div class="legend-item">
                                    <div class="legend-color free"></div>
                                    <span>Libre</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color occupied"></div>
                                    <span>Occup√©e</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color reserved"></div>
                                    <span>R√©serv√©e</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color cleaning"></div>
                                    <span>Nettoyage</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Inventory Management -->
                <div id="inventory-management" class="host-content-section hidden">
                    <div class="host-section-header">
                        <div>
                            <h2>üì¶ Gestion des stocks</h2>
                            <p class="section-subtitle">Suivre l'inventaire et la disponibilit√© des plats</p>
                        </div>
                        <button id="refresh-inventory-btn" class="btn btn-secondary">üîÑ Actualiser</button>
                    </div>
                    <div class="inventory-filters">
                        <input type="text" id="inventory-search-input" placeholder="üîç Rechercher un plat..." class="search-input">
                        <select id="inventory-status-filter" class="status-filter">
                            <option value="all">Tous</option>
                            <option value="in-stock">En stock</option>
                            <option value="low-stock">Stock faible</option>
                            <option value="out-of-stock">Rupture</option>
                        </select>
                    </div>
                    <div id="inventory-list" class="inventory-list">
                        <!-- Inventory items will be rendered here -->
                    </div>
                </div>
                
                <!-- Shifts Management -->
                <div id="shifts-management" class="host-content-section hidden">
                    <div class="host-section-header">
                        <div>
                            <h2>üë• Gestion des √©quipes</h2>
                            <p class="section-subtitle">G√©rer les shifts et les √©quipes de travail</p>
                        </div>
                        <button id="add-shift-btn" class="btn btn-primary">‚ûï Nouveau shift</button>
                    </div>
                    <div id="current-shift-info" class="current-shift-info">
                        <!-- Current shift info will be rendered here -->
                    </div>
                    <div id="shifts-list" class="shifts-list">
                        <!-- Shifts will be rendered here -->
                    </div>
                </div>
                
                <!-- Discounts Management -->
                <div id="discounts-management" class="host-content-section hidden">
                    <div class="host-section-header">
                        <div>
                            <h2>üé´ Gestion des remises</h2>
                            <p class="section-subtitle">Cr√©er et g√©rer les promotions et remises</p>
                        </div>
                        <button id="add-discount-btn" class="btn btn-primary">‚ûï Nouvelle remise</button>
                    </div>
                    <div id="discounts-list" class="discounts-list">
                        <!-- Discounts will be rendered here -->
                    </div>
                </div>
                
                <!-- Reports View -->
                <div id="reports-management" class="host-content-section hidden">
                    <div class="host-section-header">
                        <div>
                            <h2>üìä Rapports d√©taill√©s</h2>
                            <p class="section-subtitle">Analyses approfondies et exports</p>
                        </div>
                        <div class="reports-actions">
                            <select id="report-type-select" class="report-type-select">
                                <option value="sales">Ventes</option>
                                <option value="dishes">Plats</option>
                                <option value="tables">Tables</option>
                                <option value="servers">Serveurs</option>
                                <option value="hours">Par heure</option>
                            </select>
                            <button id="generate-report-btn" class="btn btn-primary">üìÑ G√©n√©rer rapport</button>
                            <button id="export-pdf-btn" class="btn btn-secondary">üì• Export PDF</button>
                        </div>
                    </div>
                    <div id="reports-content" class="reports-content">
                        <!-- Reports will be rendered here -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Payment Panel -->
    <div id="payment-panel" class="payment-panel hidden" role="dialog" aria-modal="true" aria-labelledby="payment-title">
        <div class="payment-panel-header">
            <h3 id="payment-title">Encaisser</h3>
            <button id="payment-close-btn" class="btn btn-icon" aria-label="Fermer">‚úï</button>
        </div>
        <div id="payment-pad-summary" class="payment-pad-summary">
            <!-- Pad summary will be rendered here -->
        </div>
        
        <!-- Paiements existants -->
        <div id="payment-existing-payments" class="payment-existing-payments">
            <!-- Existing payments will be rendered here -->
        </div>
        
        <div class="payment-row">
            <label>Total d√ª</label>
            <div id="payment-total-due" class="payment-total-due">0,00 ‚Ç¨</div>
        </div>
        <div class="payment-row">
            <label>D√©j√† pay√©</label>
            <div id="payment-paid" class="payment-paid">0,00 ‚Ç¨</div>
        </div>
        <div class="payment-row payment-row-highlight">
            <label><strong>Reste √† payer</strong></label>
            <div id="payment-remaining" class="payment-remaining">0,00 ‚Ç¨</div>
        </div>
        
        <div class="payment-divider"></div>
        
        <div class="payment-split-options">
            <h4>Options de division</h4>
            <div class="payment-split-buttons">
                <button id="split-by-person-btn" class="btn btn-outline btn-sm">Diviser par personne</button>
                <button id="split-by-covers-btn" class="btn btn-outline btn-sm">Diviser par couverts</button>
                <button id="split-custom-btn" class="btn btn-outline btn-sm">Montant personnalis√©</button>
            </div>
        </div>
        
        <div class="payment-row">
            <label for="payment-split-amount">Montant de ce paiement</label>
            <input type="number" id="payment-split-amount" step="0.01" min="0" placeholder="0,00">
        </div>
        <div class="payment-row">
            <label for="payment-split-people">Nombre de personnes (optionnel)</label>
            <input type="number" id="payment-split-people" min="1" placeholder="1">
        </div>
        
        <div class="payment-row">
            <label for="payment-discount">Remise globale</label>
            <input type="number" id="payment-discount" step="0.01" min="0" placeholder="0,00">
        </div>
        <div class="payment-row">
            <label for="payment-tip">Pourboire global</label>
            <input type="number" id="payment-tip" step="0.01" min="0" placeholder="0,00">
        </div>
        <div class="payment-row">
            <label for="payment-method">M√©thode de paiement</label>
            <select id="payment-method">
                <option value="cash" selected>Esp√®ces</option>
                <option value="card">Carte bancaire</option>
                <option value="cheque">Ch√®que</option>
                <option value="voucher">Bon d'achat</option>
                <option value="other">Autre</option>
            </select>
        </div>
        <div class="payment-row" id="payment-received-row">
            <label for="payment-received">Montant re√ßu (esp√®ces)</label>
            <input type="number" id="payment-received" step="0.01" min="0" placeholder="0,00">
        </div>
        <div class="payment-row">
            <label>Monnaie √† rendre</label>
            <div id="payment-change">0,00 ‚Ç¨</div>
        </div>
        <div class="payment-actions">
            <button id="payment-cancel" class="btn btn-secondary">Annuler</button>
            <button id="payment-confirm" class="btn btn-primary">Ajouter ce paiement</button>
        </div>
    </div>

    <!-- Undo notification -->
    <div id="undo-notification" class="undo-notification hidden">
        <span id="undo-message">Action annul√©e</span>
        <button id="undo-btn" class="undo-btn">Annuler (U)</button>
    </div>

    <script src="app.js"></script>
</body>
</html>
